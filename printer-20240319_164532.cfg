[include shell_command.cfg]
# This file contains common pin mappings for the BIGTREETECH Manta M8P
## To use this config, the firmware should be compiled for the
# STM32G0B1 with a "8KiB bootloader" and USB communication.

# See docs/Config_Reference.md for a description of parameters.

[mcu]

##	Obtain definition by "ls -l /dev/serial/by-id/" then unplug to verify
##--------------------------------------------------------------------
# serial: /dev/serial/by-id/usb-Klipper_stm32g0b1xx_46002E000B504B4633373520-if00
canbus_uuid: d0ffba4d3054
# restart_method: command
##--------------------------------------------------------------------

[printer]
kinematics: corexy
max_velocity: 350  
max_accel: 40000			#Max 4000
max_z_velocity: 30 			#Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 380
square_corner_velocity: 10

#####################################################################
# Include 
#####################################################################
[include mainsail.cfg]
# [include EBB.cfg]
[include EBB36.cfg]
[include macros/print_base.cfg]
[include macros/sensorless_homing.cfg]
# [include macros/stealthburner_leds.cfg]
[include macros/macros.cfg]
[include macros/bedfans.cfg]
[include macros/nozzle_scrub.cfg]
# [include macros/calibration/*.cfg]
[include config_backup.cfg]
# [include macros/klicky/klicky-probe.cfg]
# [include test_probe_accuracy.cfg]
# [include macros/Adaptive_Mesh.cfg]
[include macros/Voron_Purge.cfg]
[include macros/fan_tach_monitor.cfg]
# [include extras/picoadxl.cfg]
[include ADXL.cfg]
[include K-ShakeTune/*.cfg]
[include macros/TEST_SPEED.cfg]
# [include extras/EBBadxl.cfg]

#####################################################################
# Additions
#####################################################################

[resonance_holder]

[respond]

[force_move] 
enable_force_move: true

# Enable object exclusion
[exclude_object]

# Enable arcs support
[gcode_arcs]
resolution: 0.1

[input_shaper]
# shaper_freq_x: 88.6
# shaper_type_x: mzv
shaper_freq_x: 103.2
shaper_type_x: ei
shaper_freq_y: 87.2
shaper_type_y: ei
damping_ratio_x: 0.035
damping_ratio_y: 0.049


#####################################################################
# MCU Temp Sensors
#####################################################################
[temperature_sensor MCU]
sensor_type: temperature_mcu

[temperature_sensor Raspberry_Pi]
sensor_type: temperature_host

#####################################################################

#####################################################################
# 	X/Y Stepper Settings
#####################################################################
[stepper_x]
##	B Motor on MOTOR2
step_pin: PF12
dir_pin: PF11
enable_pin: !PB3
#endstop_pin: Z_STOP #X_STOP
endstop_pin: tmc2209_stepper_x:virtual_endstop
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 400  #set to 400 for 0.9 degree stepper
position_min: 0
position_endstop: 295
position_max: 295
homing_speed: 100   #Max 100
homing_retract_dist: 0
homing_positive_dir: true
# step_pulse_duration: 0.000004

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_x]
uart_pin: PF13
run_current: 1.1
interpolate: False
sense_resistor: 0.110
stealthchop_threshold: 0  
diag_pin: ^PF4 # use the same pin that was previously the endstop_pin!
# driver_SGTHRS: 125
# driver_SGTHRS: 130

[stepper_x1]
##	D Motor on MOTOR4
step_pin: PD3
dir_pin: PD2
enable_pin: !PD5
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 400
#endstop_pin: tmc5160_stepper_x:virtual_endstop 

[tmc2209 stepper_x1]
uart_pin: PD4
run_current: 1.1
interpolate: False
sense_resistor: 0.110
stealthchop_threshold: 0  

[stepper_y]
##	A Motor on MOTOR1
step_pin: PE2
dir_pin: PB4
enable_pin: !PC11
# endstop_pin: tmc2209_stepper_y:virtual_endstop
endstop_pin: PF3
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 400  #set to 400 for 0.9 degree stepper
position_min: 0
position_endstop: 310
position_max: 310
homing_speed: 100  #Max 100
homing_retract_dist: 0
homing_positive_dir: true
# step_pulse_duration: 0.000004

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_y]
uart_pin: PC10
run_current: 1.1
interpolate: False
sense_resistor: 0.110
stealthchop_threshold: 0 
# diag_pin: ^PF3 # use the same pin that was previously the endstop_pin!
# driver_SGTHRS: 120

[stepper_y1]
##	C Motor on MOTOR3
step_pin: PD7
dir_pin: PD6
enable_pin: !PF10
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 400
#endstop_pin: tmc5160_stepper_x:virtual_endstop 

[tmc2209 stepper_y1]
uart_pin: PF9
run_current: 1.1
interpolate: False
sense_resistor: 0.110
stealthchop_threshold: 0  

# ## X Stepper on Motor1(B Motor)
# [stepper_x]
# step_pin: PE2
# dir_pin: PB4
# enable_pin: !PC11
# microsteps: 32
# rotation_distance: 40
# full_steps_per_rotation: 200  #set to 200 for 1.8 degree stepper
# # endstop_pin: ^PF3
# endstop_pin: tmc2209_stepper_x:virtual_endstop
# position_min: 0
# ##--------------------------------------------------------------------

# ##	Uncomment below for 250mm build
# #position_endstop: 250
# #position_max: 250

# ##	Uncomment for 300mm build
# position_endstop: 300
# position_max: 300

# ##	Uncomment for 350mm build
# # position_endstop: 350
# # position_max: 350

# ##--------------------------------------------------------------------
# homing_speed: 40   #Max 100
# homing_retract_dist: 0
# homing_positive_dir: true

# ##	Make sure to update below for your relevant driver (2208 or 2209)
# [tmc2209 stepper_x]
# uart_pin: PC10
# interpolate: False
# run_current: 0.8
# # hold_current: 0.7
# sense_resistor: 0.110
# stealthchop_threshold: 0
# diag_pin: ^PF3 # use the same pin that was previously the endstop_pin!
# driver_SGTHRS: 105

# ## Y Stepper on Motor2 (A Motor)
# [stepper_y]
# step_pin: PF12
# dir_pin: PF11
# enable_pin: !PB3
# microsteps: 32
# rotation_distance: 40
# full_steps_per_rotation:200  #set to 200 for 1.8 degree stepper
# # endstop_pin: ^PF4
# endstop_pin: tmc2209_stepper_y:virtual_endstop
# position_min: 0
# ##--------------------------------------------------------------------

# ##	Uncomment for 250mm build
# #position_endstop: 250
# #position_max: 250

# ##	Uncomment for 300mm build
# # position_endstop: 300
# # position_max: 300
# position_endstop: 310
# position_max: 310

# ##	Uncomment for 350mm build
# # position_endstop: 350
# # position_max: 350

# ##--------------------------------------------------------------------
# homing_speed: 40  #Max 100
# homing_retract_dist: 0
# homing_positive_dir: true

# ##	Make sure to update below for your relevant driver (2208 or 2209)
# [tmc2209 stepper_y]
# uart_pin: PF13
# interpolate: False
# run_current: 0.8
# # hold_current: 0.7
# sense_resistor: 0.110
# stealthchop_threshold: 0
# diag_pin: ^PF4     # use the same pin that was previously the endstop_pin!
# driver_SGTHRS: 105 # 255 is most sensitive value, 0 is least sensitive


#####################################################################
# 	Z Stepper Settings
#####################################################################

## Z0 Stepper - Front Left on MOTOR5
[stepper_z]
step_pin: PC9
dir_pin: PC8
enable_pin: !PD1
rotation_distance: 40
gear_ratio: 80:16
microsteps: 32
#endstop_pin: ^PF5
##  Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
##  (+) value = endstop above Z0, (-) value = endstop below
##	Increasing position_endstop brings nozzle closer to the bed
##  After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config
#position_endstop: -0.5
# endstop_pin: probe:z_virtual_endstop
##--------------------------------------------------------------------

##	Uncomment below for 250mm build
#position_max: 240

#	Uncomment below for 300mm build
position_max: 260

##	Uncomment below for 350mm build
# position_max: 340

##--------------------------------------------------------------------
position_min: -5
homing_speed: 8
second_homing_speed: 3
# homing_retract_dist: 3
endstop_pin: probe:z_virtual_endstop # use beacon as virtual endstop
homing_retract_dist: 0 # beacon needs this to be set to 0

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_z]
uart_pin: PD0
interpolate: false
run_current: 0.8
# hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 999999

##	Z1 Stepper - Rear Left on Motor6
[stepper_z1]
step_pin: PA10
dir_pin: !PA14
enable_pin: !PA15

rotation_distance: 40
gear_ratio: 80:16
microsteps: 32

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_z1]
uart_pin: PF8
interpolate: False
run_current: 0.8
# hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 999999

##	Z2 Stepper - Rear Right on Motor7
[stepper_z2]
step_pin: PD11
dir_pin: PD9
enable_pin: !PD15

rotation_distance: 40
gear_ratio: 80:16
microsteps: 32

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_z2]
uart_pin: PD14
interpolate: False
run_current: 0.8
# hold_current: 0.80
sense_resistor: 0.110
stealthchop_threshold: 999999

##	Z3 Stepper - Front Right on Motor8
[stepper_z3]
step_pin: PD8
dir_pin: !PC6
enable_pin: !PC7

rotation_distance: 40
gear_ratio: 80:16
microsteps: 32

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_z3]
uart_pin: PD10
interpolate: False
run_current: 0.8
# hold_current: 0.80
sense_resistor: 0.110
stealthchop_threshold: 999999

# ## Z0 Stepper - Front Left on MOTOR3_A
# [stepper_z]
# step_pin: PD3
# dir_pin: PD2
# enable_pin: !PD5
# rotation_distance: 40
# gear_ratio: 80:16
# microsteps: 32
# #endstop_pin: ^PF5
# ##  Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
# ##  (+) value = endstop above Z0, (-) value = endstop below
# ##	Increasing position_endstop brings nozzle closer to the bed
# ##  After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config
# #position_endstop: -0.5
# # endstop_pin: probe:z_virtual_endstop
# ##--------------------------------------------------------------------

# ##	Uncomment below for 250mm build
# #position_max: 240

# #	Uncomment below for 300mm build
# position_max: 260

# ##	Uncomment below for 350mm build
# # position_max: 340

# ##--------------------------------------------------------------------
# position_min: -5
# homing_speed: 8
# second_homing_speed: 3
# # homing_retract_dist: 3
# endstop_pin: probe:z_virtual_endstop # use beacon as virtual endstop
# homing_retract_dist: 0 # beacon needs this to be set to 0

# ##	Make sure to update below for your relevant driver (2208 or 2209)
# [tmc2209 stepper_z]
# uart_pin: PD4
# interpolate: false
# run_current: 0.8
# # hold_current: 0.8
# sense_resistor: 0.110
# stealthchop_threshold: 999999

# ##	Z1 Stepper - Rear Left on Motor4
# [stepper_z1]
# step_pin: PC9
# dir_pin: !PC8
# enable_pin: !PD1

# rotation_distance: 40
# gear_ratio: 80:16
# microsteps: 32

# ##	Make sure to update below for your relevant driver (2208 or 2209)
# [tmc2209 stepper_z1]
# uart_pin: PD0
# interpolate: False
# run_current: 0.8
# # hold_current: 0.8
# sense_resistor: 0.110
# stealthchop_threshold: 999999

# ##	Z2 Stepper - Rear Right on Motor5
# [stepper_z2]
# step_pin: PA10
# dir_pin: PA14
# enable_pin: !PA15

# rotation_distance: 40
# gear_ratio: 80:16
# microsteps: 32

# ##	Make sure to update below for your relevant driver (2208 or 2209)
# [tmc2209 stepper_z2]
# uart_pin: PF8
# interpolate: False
# run_current: 0.8
# # hold_current: 0.80
# sense_resistor: 0.110
# stealthchop_threshold: 999999

# ##	Z3 Stepper - Front Right on Motor6
# [stepper_z3]
# step_pin: PD11
# dir_pin: !PD9
# enable_pin: !PD15

# rotation_distance: 40
# gear_ratio: 80:16
# microsteps: 32

# ##	Make sure to update below for your relevant driver (2208 or 2209)
# [tmc2209 stepper_z3]
# uart_pin: PD14
# interpolate: False
# run_current: 0.8
# # hold_current: 0.80
# sense_resistor: 0.110
# stealthchop_threshold: 999999

#####################################################################
# 	Extruder
#####################################################################
# [extruder]
# step_pin: EBBCan: PD0
# dir_pin: EBBCan: PD1
# enable_pin: !EBBCan: PD2
# # microsteps: 32                          #CW2 
# # rotation_distance: 22.4521615           #CW2
# # gear_ratio: 50:10 #for 8t motor         #CW2
# rotation_distance: 46.146               #Galileo 2
# gear_ratio: 9:1                         #Galileo 2
# microsteps: 16                          #Galileo 2
# full_steps_per_rotation: 200	#200 for 1.8 degree, 400 for 0.9 degree
# nozzle_diameter: 0.400
# filament_diameter: 1.750
# heater_pin: EBBCan: PB13
# # sensor_type: PT1000
# # sensor_pin: EBBCan: PA3
# #control: pid
# #pid_Kp: 21.527
# #pid_Ki: 1.063
# #pid_Kd: 108.982
# min_temp: 0
# max_temp: 350
# max_extrude_only_distance: 1400.0
# max_extrude_only_velocity: 75.0
# max_extrude_only_accel: 1500
# # pullup_resistor: 4700
# max_extrude_cross_section: 5
# smooth_time: 0.4

# ##	Try to keep pressure_advance below 1.0
# pressure_advance: 0.025
# ##	Default is 0.040, leave stock
# pressure_advance_smooth_time: 0.040
# pwm_cycle_time: 0.02


# sensor_type:MAX31865
# sensor_pin: EBBCan: PA4
# spi_bus: spi1
# rtd_nominal_r: 1000
# rtd_reference_r: 4300
# rtd_num_of_wires: 2

# [tmc2209 extruder]
# uart_pin: EBBCan: PA15
# # run_current: 0.65 #CW2
# run_current: 0.65
# sense_resistor: 0.110
# stealthchop_threshold: 0
# interpolate: false








# ##	E0 on Motor7
# ##	Make sure to update below for your relevant driver (2208 or 2209)
# [tmc2209 extruder]
# uart_pin: PD13
# interpolate: false
# run_current: 0.5
# hold_current: 0.4
# sense_resistor: 0.110
# stealthchop_threshold: 0

#[filament_switch_sensor material_0]
#switch_pin: PC1

#[filament_switch_sensor material_1]
#switch_pin: PC2

#####################################################################
# 	Bed Heater
#####################################################################

[heater_bed]
##	SSR Pin - BED_OUT
heater_pin: PB7
sensor_type: ATC Semitec 104NT-4-R025H42G
sensor_pin: PA0
pwm_cycle_time: 0.01
##	Adjust Max Power so your heater doesn't warp your bed
max_power: 1.0
min_temp: 0
max_temp: 120
#control: pid
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769

[verify_heater heater_bed]
max_error: 160
#   The maximum "cumulative temperature error" before raising an
#   error. Smaller values result in stricter checking and larger
#   values allow for more time before an error is reported.
#   Specifically, the temperature is inspected once a second and if it
#   is close to the target temperature then an internal "error
#   counter" is reset; otherwise, if the temperature is below the
#   target range then the counter is increased by the amount the
#   reported temperature differs from that range. Should the counter
#   exceed this "max_error" then an error is raised. The default is
#   120.
check_gain_time: 90
#   This controls heater verification during initial heating. Smaller
#   values result in stricter checking and larger values allow for
#   more time before an error is reported. Specifically, during
#   initial heating, as long as the heater increases in temperature
#   within this time frame (specified in seconds) then the internal
#   "error counter" is reset. The default is 20 seconds for extruders
#   and 60 seconds for heater_bed.
#hysteresis: 5
#   The maximum temperature difference (in Celsius) to a target
#   temperature that is considered in range of the target. This
#   controls the max_error range check. It is rare to customize this
#   value. The default is 5.
#heating_gain: 2
#   The minimum temperature (in Celsius) that the heater must increase
#   by during the check_gain_time check. It is rare to customize this
#   value. The default is 2.


#####################################################################
# 	Probe
#####################################################################

# [probe]
# ##	Inductive Probe
# ##	This probe is not used for Z height, only Quad Gantry Leveling
# ##  NPN and PNP proximity switch types can be set by jumper
# pin: EBBCan:PB5
# x_offset: 0
# y_offset: 0
# #z_offset: 0
# speed: 10.0
# samples: 3
# samples_result: median
# sample_retract_dist: 3.0
# samples_tolerance: 0.0075
# samples_tolerance_retries: 3


# activate_gcode:
#     {% set PROBE_TEMP = 170 %}
#     {% set MAX_TEMP = PROBE_TEMP + 5 %}
#     {% set ACTUAL_TEMP = printer.extruder.temperature %}
#     {% set TARGET_TEMP = printer.extruder.target %}

#     {% if TARGET_TEMP > PROBE_TEMP %}
#         { action_respond_info('Extruder temperature target of %.1fC is too high, lowering to %.1fC' % (TARGET_TEMP, PROBE_TEMP)) }
#         M109 S{ PROBE_TEMP }
#     {% else %}
#         # Temperature target is already low enough, but nozzle may still be too hot.
#         {% if ACTUAL_TEMP > MAX_TEMP %}
#             { action_respond_info('Extruder temperature %.1fC is still too high, waiting until below %.1fC' % (ACTUAL_TEMP, MAX_TEMP)) }
#             TEMPERATURE_WAIT SENSOR=extruder MAXIMUM={ MAX_TEMP }
#         {% endif %}
#     {% endif %}

[beacon]
serial: /dev/serial/by-id/usb-Beacon_Beacon_RevH_9C27DA3D5154364134202020FF142320-if00
x_offset: 0 # update with offset from nozzle on your machine
y_offset: 21.5 # update with offset from nozzle on your machine
mesh_main_direction: x
mesh_runs: 2
    

#####################################################################
# 	Fan Control
#####################################################################


# [fan]
# ##	Print Cooling Fan - CNC_FAN0
# pin: EBBCan: PA1
# kick_start_time: 0.5
# ##	Depending on your fan, you may need to increase this value
# ##	if your fan will not start. Can change cycle_time (increase)
# ##	if your fan is not able to slow down effectively
# off_below: 0.10

# [heater_fan hotend_fan]
# ##	Hotend Fan - CNC_FAN1
# pin: EBBCan: PA0
# max_power: 1.0
# kick_start_time: 0.5
# heater: extruder
# heater_temp: 50.0
# ##	If you are experiencing back flow, you can reduce fan_speed
# #fan_speed: 1.0
# tachometer_pin: ^EBBCan: PB15


[heater_fan controller_fan]
##	Controller fan - CNC_FAN2
pin: PE6
kick_start_time: 0.5
heater: heater_bed
heater_temp: 45.0
fan_speed: 0.9

# [controller_fan canbus_fan]
# pin: EBBCan:PB9
# max_power: 1.0
# shutdown_speed: 1.0
# kick_start_time: 0.5
# heater: heater_bed
# fan_speed: 1.00

# [fan_generic canb]
# pin: EBBCan:PB9
# #pwm: true
# cycle_time: 0.010
# #value: 0
# #shutdown_value: 0

[fan_generic nevermore]
pin: PE5
# pwm: true
cycle_time: 0.010
# value: 0
# shutdown_value: 0

#[heater_fan exhaust_fan]
##	Exhaust fan - CNC_FAN3
#pin: PE5
#max_power: 1.0
#shutdown_speed: 0.0
#kick_start_time: 5.0
#heater: heater_bed
#heater_temp: 60
#fan_speed: 1.0

#[heater_fan fan4]
#pin: PE4
#tachometer_pin: PC13

#[heater_fan fan5]
#pin: PB8
#tachometer_pin: PC14

#[heater_fan fan6]
#pin: PB9
#tachometer_pin: PC15

#####################################################################
#   Sensors
#####################################################################

[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PA1
# pullup_resistor: 2200
min_temp: 0
max_temp: 100
gcode_id: chamber_th

# [filament_motion_sensor filament_sensor]
# detection_length: 10
# extruder: extruder
# switch_pin: ^PC5
# pause_on_runout: True
# insert_gcode:
#     M117 Insert Detected
# runout_gcode:
#     M117 Runout Detected
#     #LCDRGB R=1 G=0 B=0  # Turn LCD red
#     #BEEP I=12

# [filament_motion_sensor filament_sensor]
# detection_length: 15.00 ; This can be adjusted to your desired level of sensitivity. 10 is a recomended value to prevent flow dropoff false triggers.
# extruder: extruder
# switch_pin: ^PC5
# pause_on_runout: True # This can be set to false to debug false positives putting the sensor in "monitor mode". The printer will not pause but it will run the runout_gcode below. 
# event_delay: 3.0
# pause_delay: 0.5
# runout_gcode:
#     M117 Runout Detected!

# [filament_switch_sensor switch_sensor]
# switch_pin: ^PB0
# pause_on_runout: True
# runout_gcode:
#   PAUSE # [pause_resume] is required in printer.cfg
#   M117 Filament switch runout
# insert_gcode:
#   M117 Filament switch inserted

# [filament_motion_sensor filament_sensor]
# switch_pin: ^PC5
# detection_length: 13
# extruder: extruder
# pause_on_runout: True
# event_delay: 3.0
# pause_delay: 0.5
# runout_gcode:
#     M117 Runout Detected!
# runout_gcode:
#   PAUSE # [pause_resume] is required in printer.cfg
#   M117 Filament encoder runout
# insert_gcode:
#   M117 Filament encoder inserted
#####################################################################
# 	LED Control
#####################################################################

[output_pin caselight]
## Chamber Lighting - HE1 Connector (Optional)
pin: PB5
pwm: true
hardware_pwm: true
shutdown_value: 0
value:0
# scale: 100
cycle_time: 0.01

#####################################################################
# 	Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 3600

# [safe_z_home]
# ##	XY Location of the Z Endstop Switch
# ##	Update -10,-10 to the XY coordinates of your endstop pin 
# ##	(such as 157,305) after going through Z Endstop Pin
# ##	Location Definition step.
# home_xy_position:150,150
# speed:50
# z_hop:10

[quad_gantry_level]
##	Use QUAD_GANTRY_LEVEL to level a gantry.
##	Min & Max gantry corners - measure from nozzle at MIN (0,0) and 
##	MAX (250, 250), (300,300), or (350,350) depending on your printer size
##	to respective belt positions

#--------------------------------------------------------------------

	
##	Gantry Corners for 300mm Build
##	Uncomment for 300mm build
gantry_corners:
	-60,-10
	360,370
#	Probe points
points:
	50,25
	50,225
	250,225
	250,25


#--------------------------------------------------------------------
speed: 200
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075
max_adjust: 10




#####################################################################
# 	Bed Mesh
#####################################################################

# [bed_mesh]
# speed: 300
# horizontal_move_z: 10
# ##--------------------------------------------------------------------
# ##	Uncomment below for 250mm build
# #mesh_min: 40, 40
# #mesh_max: 210,210

# ##	Uncomment for 300mm build
# mesh_min: 40, 40
# mesh_max: 260,260

# ##	Uncomment for 350mm build
# #mesh_min: 40, 40
# #mesh_max: 310,310
# ##--------------------------------------------------------------------
# fade_start: 0.6
# fade_end: 10.0
# probe_count: 5,5 # Values should be odd, so one point is directly at bed center
# algorithm: bicubic
# # relative_reference_index: 12 # Update when changing probe_count, to ((x points * y points) - 1) / 2. (the center point)

[bed_mesh]
speed: 350

mesh_min: 40, 40
mesh_max: 260,260
##--------------------------------------------------------------------
fade_start: 0.6
fade_end: 10.0
probe_count: 15,15
algorithm: bicubic



#####################################################################
# 	Macros
#####################################################################

# [gcode_macro G32]
# gcode:
#     BED_MESH_CLEAR
#     G28
#     QUAD_GANTRY_LEVEL
#     G28
#     ##	Uncomment for for your size printer:
#     #--------------------------------------------------------------------
#     ##	Uncomment for 250mm build
#     #G0 X125 Y125 Z30 F3600
    
#     ##	Uncomment for 300 build
#     G0 X150 Y150 Z30 F3600
    
#     ##	Uncomment for 350mm build
#     #G0 X175 Y175 Z30 F3600
#     #--------------------------------------------------------------------
   
# [gcode_macro PRINT_START]
# #   Use PRINT_START for the slicer starting script - please customise for your slicer of choice
# gcode:
#     G32                            ; home all axes
#     G1 Z20 F3000                   ; move nozzle away from bed
   

# [gcode_macro PRINT_END]
# #   Use PRINT_END for the slicer ending script - please customise for your slicer of choice
# gcode:
#     M400                           ; wait for buffer to clear
#     G92 E0                         ; zero the extruder
#     G1 E-10.0 F3600                ; retract filament
#     G91                            ; relative positioning
#     G0 Z1.00 X20.0 Y20.0 F20000    ; move nozzle to remove stringing
#     TURN_OFF_HEATERS
#     M107                           ; turn off fan
#     G1 Z2 F3000                    ; move nozzle up 2mm
#     G90                            ; absolute positioning
#     G0  X125 Y250 F3600            ; park nozzle at rear
#     BED_MESH_CLEAR
    
## 	Thermistor Types
##   "EPCOS 100K B57560G104F"
##   "ATC Semitec 104GT-2"
##   "NTC 100K beta 3950"
##   "Honeywell 100K 135-104LAG-J01"
##   "NTC 100K MGB18-104F39050L32" (Keenovo Heater Pad)
##   "AD595"
##   "PT100 INA826"

#[bltouch]
#sensor_pin: PB2
#control_pin: PB1

# Proximity switch
#[probe]
#pin: PF6

#[output_pin ps_on_pin]
#pin: PC3

#[neopixel my_neopixel_1]
#pin: PC6

#[neopixel my_neopixel_2]
#pin: PA9

#[hall_filament_width_sensor]
#adc1: PC5
#adc2: PB0

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 37.578
#*# pid_ki = 1.423
#*# pid_kd = 248.014
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 24.408
#*# pid_ki = 1.205
#*# pid_kd = 123.569
#*#
#*# [beacon model default]
#*# model_coef = 1.658737105571901,
#*# 	  1.9640120592099024,
#*# 	  0.6673942134136199,
#*# 	  0.2929915664417016,
#*# 	  0.3091639387876418,
#*# 	  0.1706454573530658,
#*# 	  -0.2270737678761059,
#*# 	  -0.11544747274683796,
#*# 	  0.19225051933210272,
#*# 	  0.08980295326088046
#*# model_domain = 1.9051872945240145e-07,1.949607733794549e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 82.209083
#*# model_offset = 0.00000
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.055864, -0.041041, -0.033487, -0.018663, -0.005422, -0.004990, -0.000270, 0.003475, -0.007326, -0.022631, -0.033260, -0.044563, -0.057595, -0.060292, -0.058110
#*# 	-0.071623, -0.055401, -0.045044, -0.025963, -0.011114, -0.008330, -0.000446, 0.005746, -0.001612, -0.019196, -0.030217, -0.044401, -0.053431, -0.049342, -0.041194
#*# 	-0.089058, -0.068407, -0.051541, -0.026990, -0.012225, -0.005899, 0.002980, 0.010172, 0.006304, -0.005162, -0.015834, -0.031630, -0.040678, -0.035342, -0.022894
#*# 	-0.105548, -0.081415, -0.062582, -0.036399, -0.018511, -0.011273, 0.000960, 0.010288, 0.011342, 0.005595, -0.000076, -0.011023, -0.020682, -0.018454, -0.009925
#*# 	-0.116210, -0.089264, -0.069810, -0.044951, -0.026088, -0.015478, -0.002091, 0.010344, 0.014189, 0.008472, 0.006874, 0.003066, -0.004264, -0.004684, 0.004563
#*# 	-0.120504, -0.091572, -0.072569, -0.047568, -0.027166, -0.014998, -0.002053, 0.007818, 0.010888, 0.005020, 0.005632, 0.006176, 0.003775, 0.003805, 0.015243
#*# 	-0.118687, -0.090521, -0.071266, -0.047274, -0.028042, -0.016533, -0.006739, 0.001811, 0.000770, -0.009875, -0.010730, -0.005384, -0.003048, 0.000651, 0.013809
#*# 	-0.101908, -0.084387, -0.067744, -0.046343, -0.028413, -0.020451, -0.010287, -0.003163, -0.011862, -0.031896, -0.037402, -0.029323, -0.018900, -0.007534, 0.006653
#*# 	-0.091995, -0.079761, -0.064185, -0.042855, -0.027540, -0.018261, -0.008857, -0.005073, -0.018361, -0.044498, -0.057755, -0.047387, -0.035007, -0.020076, -0.005065
#*# 	-0.101972, -0.080213, -0.060894, -0.039526, -0.024041, -0.012469, -0.003506, -0.005894, -0.020006, -0.045794, -0.059804, -0.057276, -0.045923, -0.031447, -0.016905
#*# 	-0.100463, -0.077005, -0.059470, -0.040470, -0.022391, -0.011311, -0.003443, -0.006844, -0.021823, -0.048311, -0.068459, -0.073846, -0.067484, -0.051256, -0.033165
#*# 	-0.090815, -0.068440, -0.056855, -0.038796, -0.015684, -0.004844, 0.000539, -0.002616, -0.017833, -0.048254, -0.073758, -0.083464, -0.080728, -0.068274, -0.046435
#*# 	-0.080832, -0.060683, -0.051835, -0.033608, -0.008517, 0.000391, 0.004380, 0.005479, -0.006753, -0.030752, -0.055379, -0.067833, -0.070376, -0.065084, -0.056011
#*# 	-0.063919, -0.047326, -0.039755, -0.021938, 0.000161, 0.007525, 0.010753, 0.011897, 0.007532, -0.005361, -0.022789, -0.037069, -0.045325, -0.050297, -0.052314
#*# 	-0.040883, -0.028630, -0.020099, -0.002632, 0.014301, 0.017526, 0.018237, 0.020508, 0.018419, 0.007525, -0.007900, -0.023868, -0.037381, -0.048425, -0.057307
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 40.0
#*# max_x = 260.0
#*# min_y = 40.0
#*# max_y = 260.0
